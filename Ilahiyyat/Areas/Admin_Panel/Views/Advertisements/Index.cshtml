@model IEnumerable<Ilahiyyat.Models.Advertisement>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin_Panel/Views/Shared/Layout.cshtml";
}

<div class="col-md-7">
    <h2>Elanlar</h2>

    <p>
        @Html.ActionLink("Yenisini Əlavə Et", "Create")
    </p>
</div>
<div class="col-md-3">
    <div class="row">
        <div class="col-lg-12">
            <div class="input-group form">
                <input type="text" id="search" class="form-control" placeholder="Axtar...">
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="button" id="btn">Axtar</button>
                </span>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>
                    Elanın Adı
                </th>
                <th>
                    Elanın şəkili
                </th>
                <th>
                    Elanın məzmunu
                </th>
                <th>
                    Elanın başlanğıc günü
                </th>
                <th>
                    Elanın bitmə günü
                </th>
                <th>
                    Elanın təşkil olunduğu yer
                </th>
                <th>
                    Elanı təşkil edənin adı
                </th>
                <th>
                    Elanı təşkil edənin nömrəsi
                </th>
                <th>
                    Elanı təşkil edənin emaili
                </th>
        </thead>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_adi)
                </td>
                <td>
                    <img src="@item.elanin_şəkili" style="max-width:100%; max-height:200px" />
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_məzmunu)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_başlanqic_günü)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_bitdiyi_gün)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_yeri)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_təşkilaçinin_adi)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_təşkilaçinin_nomrəsi)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.elanin_təşkilaçinin_email)
                </td>
                <td>
                    @Html.ActionLink("Yenilə", "Edit", new { id = item.id }) |
                    @Html.ActionLink("Detallar", "Details", new { id = item.id }) |
                    @Html.ActionLink("Sil", "Delete", new { id = item.id })
                </td>
            </tr>
        }

    </table>
</div>
<script src="https://code.jquery.com/jquery.js"></script>
<script>
        $(document).ready(function (e) {
            var x;
            $("#btn").click(function (e) {
                x = $("#search").val();
                console.log(x);
                $.ajax({
                    type: "Get",
                    data: {
                        search: x
                    },
                    url: "http://localhost:60851/Admin_Panel/Advertisements/Search",
                    contentType: "Html",
                    success: function (response) {
                        $("body").html(response)
                    }
                })
            })
        })
</script>